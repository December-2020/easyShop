(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67aeab62"],{5387:function(t,s,i){"use strict";i("b831")},b831:function(t,s,i){},c740:function(t,s,i){"use strict";var a=i("23e7"),e=i("b727").findIndex,n=i("44d2"),c="findIndex",r=!0;c in[]&&Array(1)[c]((function(){r=!1})),a({target:"Array",proto:!0,forced:r},{findIndex:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}}),n(c)},cf2a:function(t,s,i){"use strict";i.r(s);var a=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"order"},[i("div",{staticClass:"floor1"},[i("van-tabs",{attrs:{type:"card"},on:{disabled:t.onClickDisabled}},[i("van-tab",{attrs:{title:"快递配送"}},[i("div",{staticClass:"content"},[i("van-contact-card",{attrs:{type:"edit",name:t.currentContact.name,tel:t.currentContact.tel},on:{click:t.onEdit}})],1)]),i("van-tab",{attrs:{title:"到店自取",disabled:""}},[i("div",{staticClass:"content"})])],1)],1),t.buyList?i("div",{staticClass:"floor2"},[i("div",{staticClass:"title"},[t._v("共"+t._s(t.buyList.length)+"件商品")]),i("div",{staticClass:"content"},[i("ul",t._l(t.shopList,(function(t){return i("li",{key:t.id},[i("van-card",{attrs:{num:t.cart_num,price:t.truePrice,desc:t.productInfo.attrInfo.suk,title:t.productInfo.store_name,thumb:t.productInfo.image}})],1)})),0)])]):t._e(),i("div",{staticClass:"floor3"},[i("ul",[i("li",[i("div",{staticClass:"l"},[t._v("优惠劵")]),i("div",{staticClass:"r"},[i("span",[t._v("请选择")]),t._v(" "),i("van-icon",{attrs:{name:"arrow"}})],1)]),i("li",[i("div",{staticClass:"l"},[t._v("积分抵扣")]),i("div",{staticClass:"r"},[i("span",[t._v("当前积分")]),i("span",[t._v(t._s(t.loginUser.integral))]),i("van-checkbox",{attrs:{"checked-color":"#e93323","icon-size":"16px"},model:{value:t.chekcBox,callback:function(s){t.chekcBox=s},expression:"chekcBox"}})],1)]),t._m(0),t._m(1)]),i("div",{staticClass:"mes"},[i("div",{staticClass:"t"},[t._v(" 备注信息")]),i("van-field",{attrs:{rows:"2",autosize:"",type:"textarea",maxlength:"150",placeholder:"请添加备注(150字以内)","show-word-limit":""},model:{value:t.message,callback:function(s){t.message=s},expression:"message"}})],1)]),i("div",{staticClass:"floor4"},[i("div",{staticClass:"t"},[t._v("支付方式")]),i("div",{staticClass:"c"},[t._m(2),i("div",{staticClass:"pay"},[t._m(3),i("div",{staticClass:"r"},[t._v("可用余额: "+t._s(t.loginUser.now_money))])])])]),i("div",{staticClass:"floor5"},[i("div",{staticClass:"l"},[t._v("商品总价:")]),i("div",{staticClass:"r"},[t._v("￥ "+t._s(t.sumPrice))])]),i("van-submit-bar",{attrs:{price:100*t.sumPrice,disabled:t.isDisabled,loading:t.isLoading,"button-text":"提交订单"},on:{submit:t.onSubmit}})],1)},e=[function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("li",[i("div",{staticClass:"l"},[t._v("会员优惠")]),i("div",{staticClass:"r"},[t._v("￥139.90")])])},function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("li",[i("div",{staticClass:"l"},[t._v("快递费用")]),i("div",{staticClass:"r"},[t._v("免运费")])])},function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"pay"},[i("div",{staticClass:"l weixin"},[i("i",{staticClass:"iconfont icon-weixin"}),t._v(" 微信支付 ")]),i("div",{staticClass:"r"},[t._v("微信快捷支付")])])},function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"l zhifu"},[i("i",{staticClass:"iconfont icon-zhifu"}),t._v(" 余额支付 ")])}],n=i("5530"),c=(i("4de4"),i("c740"),i("2f62")),r={props:["orderKey","ids","buyList"],data:function(){return{currentContact:{name:"张三",tel:"13000000000"},chekcBox:!1,message:"",sumPrice:0,isLoading:!1,countdown:3,isDisabled:!1,shopList:null}},computed:Object(n["a"])({},Object(c["c"])(["loginUser"])),activated:function(){var t=this;this.axios.post("api/order/computed/"+this.orderKey,{addressId:3363,couponId:0,payType:"yue",shipping_type:1,useIntegral:0}).then((function(s){t.sumPrice=s.data.data.result.total_price,t.shopList=t.unique(t.buyList)}))},methods:{onEdit:function(){this.$toast("编辑")},onClickDisabled:function(){this.$toast("暂无服务")},unique:function(t){var s=t.filter((function(t,s,i){return i.findIndex((function(s){return s.id==t.id}))===s}));return s},onSubmit:function(){var t=this;this.isLoading=!0,this.$toast("生成订单中"),this.axios.post("api/order/create/"+this.orderKey,{addressId:3363,bargainId:0,combinationId:0,couponId:0,from:"weixinh5",mark:"",payType:"yue",phone:"",pinkId:0,real_name:"",seckill_id:0,shipping_type:1,store_id:0,useIntegral:0}).then((function(s){if(200==s.data.status){t.$toast(s.data.msg),t.isLoading=!1;var i=s.data.data.result.orderId;t.$router.push("/pay/"+i)}}))}}},o=r,l=(i("5387"),i("2877")),d=Object(l["a"])(o,a,e,!1,null,null,null);s["default"]=d.exports}}]);
//# sourceMappingURL=chunk-67aeab62.58926196.js.map