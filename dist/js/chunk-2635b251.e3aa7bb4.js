(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2635b251"],{"13a9":function(t,n,e){},"4a05":function(t,n,e){"use strict";e("f086")},"4fde":function(t,n,e){"use strict";e("e013")},"7d57":function(t,n,e){"use strict";e("13a9")},a55b:function(t,n,e){"use strict";e.r(n);var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"login"},[e("div",{staticClass:"img"},[e("van-image",{attrs:{src:t.imgUrl,"lazy-load":"",round:"",fit:"cover"}})],1),e("div",{staticClass:"mes"},[e(t.showComponent,{tag:"component"})],1),e("div",{staticClass:"buttom"})])},o=[],s=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"log_in"},[e("van-tabs",[e("van-tab",{attrs:{title:"账号登录"}},[e("van-form",{on:{submit:t.onSubmit}},[e("van-field",{attrs:{name:"account","left-icon":"phone-o",placeholder:"输入手机号码",rules:[{required:!0,message:"请输入手机号码"},{pattern:/^1[345678]\d{9}$/,message:"手机号码格式错误"}]},model:{value:t.account,callback:function(n){t.account=n},expression:"account"}}),e("van-field",{attrs:{type:"password",name:"password","left-icon":"lock",placeholder:"填写登录密码",rules:[{required:!0,message:"请填写密码"},{pattern:/^\w{6,18}$/,message:"密码由6-18位数字、a-z、A-Z组成"}]},model:{value:t.password,callback:function(n){t.password=n},expression:"password"}}),e("div",{staticClass:"text"},[e("van-icon",{attrs:{name:"question-o"}}),e("span",[t._v("忘记密码")])],1),e("div",{staticStyle:{margin:"16px"}},[e("van-button",{staticClass:"sub",attrs:{round:"",block:"",type:"info","native-type":"submit"}},[t._v("登录")])],1),e("div",{staticClass:"change",on:{click:function(n){return n.stopPropagation(),t.goSign.apply(null,arguments)}}},[e("span",[t._v("没有账号?")]),t._v("立即注册 ")])],1)],1),e("van-tab",{attrs:{title:"快速登录"}},[e("van-form",{on:{submit:t.onPhone}},[e("van-field",{attrs:{name:"mobile","left-icon":"phone-o",placeholder:"输入手机号码",rules:[{required:!0,message:"请输入手机号码"},{pattern:/^1[345678]\d{9}$/,message:"手机号码格式错误"}]},model:{value:t.mobile,callback:function(n){t.mobile=n},expression:"mobile"}}),e("van-field",{attrs:{type:"number",name:"captcha","left-icon":"lock",placeholder:"填写验证码",rules:[{required:!0,message:"请填写密码"},{pattern:/^\d{6}$/,message:"验证码为6位"}]},scopedSlots:t._u([{key:"button",fn:function(){return[e("van-button",{attrs:{round:"",size:"mini",type:"primary",color:"#f35446","native-type":"button",disabled:t.countdown<60},on:{click:t.getSms}},[t._v(" "+t._s(t.countdown>=60?"获取验证码":"倒计"+t.countdown+"秒")+" ")])]},proxy:!0}]),model:{value:t.captcha,callback:function(n){t.captcha=n},expression:"captcha"}}),e("div",{staticStyle:{margin:"16px"}},[e("van-button",{staticClass:"sub",attrs:{round:"",block:"",type:"info","native-type":"submit"}},[t._v("登录")])],1),e("div",{staticClass:"change",on:{click:function(n){return n.stopPropagation(),t.goSign.apply(null,arguments)}}},[e("span",[t._v("没有账号?")]),t._v("立即注册 ")])],1)],1)],1)],1)},i=[],c=e("5530"),l=e("2f62"),r={data:function(){return{account:"",password:"",mobile:"",captcha:"",smskey:"",countdown:60}},created:function(){var t=this;this.axios.get("/api/verify_code").then((function(n){t.smskey=n.data.data.key}))},methods:Object(c["a"])(Object(c["a"])({onSubmit:function(t){var n=this;this.axios.post("api/login",t).then((function(t){200==t.data.status?(n.saveToken(t.data.data.token),n.getLoginInfo(t.data.data.token),n.$toast({message:"登录成功",icon:"success",onClose:function(){n.$router.back()}})):n.$toast.fail(t.data.msg)}))},onPhone:function(){var t=this;this.axios.post("api/login/mobile",{phone:this.mobile,captcha:this.captcha,spread:null}).then((function(n){if(200==n.data.status){var e=n.data.data.token;t.saveToken(e),t.getLoginInfo(),t.$toast({message:"登录成功",icon:"success",onClose:function(){t.$router.back()}})}else t.$toast(n.data.msg)}))},getSms:function(){var t=this,n=this.mobile;this.axios.post("api/register/verify",{key:this.smskey,phone:n,type:"login"}).then((function(n){200==n.data.status?t.$toast({message:"发送成功",icon:"success",onClose:function(){var n=setInterval((function(){if(t.countdown<=1)return clearInterval(n),t.countdown=60,void(t.captcha="");t.countdown--}),1e3)}}):t.$toast(n.data.msg)}))},goSign:function(){this.$parent.changeSign()}},Object(l["d"])(["saveToken"])),Object(l["b"])(["getLoginInfo"]))},u=r,d=(e("7d57"),e("2877")),p=Object(d["a"])(u,s,i,!1,null,null,null),m=p.exports,f=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"sign_in"},[e("van-form",[e("div",{staticClass:"title"},[t._v("注册账号")]),e("van-field",{attrs:{name:"mobile","left-icon":"phone-o",placeholder:"输入手机号码",rules:[{required:!0,message:"请输入手机号码"},{pattern:/^1[345678]\d{9}$/,message:"手机号码格式错误"}]},model:{value:t.mobile,callback:function(n){t.mobile=n},expression:"mobile"}}),e("van-field",{attrs:{type:"number",name:"captcha","left-icon":"lock",placeholder:"填写验证码",rules:[{required:!0,message:"请填写密码"},{pattern:/^\d{6}$/,message:"验证码为6位"}]},scopedSlots:t._u([{key:"button",fn:function(){return[e("van-button",{attrs:{round:"",size:"mini",type:"primary",color:"#f35446","native-type":"button",disabled:t.countdown<60},on:{click:t.getSms}},[t._v(" "+t._s(t.countdown>=60?"获取验证码":"倒计"+t.countdown+"秒")+" ")])]},proxy:!0}]),model:{value:t.captcha,callback:function(n){t.captcha=n},expression:"captcha"}}),e("van-field",{attrs:{name:"password","left-icon":"lock",placeholder:"填写您的登录密码",rules:[{required:!0,message:"请输入密码"},{pattern:/^\w{6,18}$/,message:"密码由6-18位数字、a-z、A-Z组成"}]},model:{value:t.password,callback:function(n){t.password=n},expression:"password"}}),e("div",{staticStyle:{margin:"16px"}},[e("van-button",{staticClass:"sub",attrs:{round:"",block:"",type:"info","native-type":"submit"}},[t._v("登录")])],1),e("div",{staticClass:"change",on:{click:function(n){return n.stopPropagation(),t.goLogin.apply(null,arguments)}}},[e("span",[t._v("已有账号?")]),t._v("立即登录 ")])],1)],1)},v=[],g={data:function(){return{countdown:60,captcha:"",mobile:"",password:""}},methods:{goLogin:function(){this.$parent.changeLogin()},getSms:function(){var t=this,n=this.mobile;this.axios.post("api/register/verify",{key:this.smskey,phone:n,type:"login"}).then((function(n){200==n.data.status?t.$toast({message:"发送成功",icon:"success",onClose:function(){var n=setInterval((function(){if(t.countdown<=1)return clearInterval(n),t.countdown=60,void(t.captcha="");t.countdown--}),1e3)}}):t.$toast(n.data.msg)}))}}},h=g,b=(e("4a05"),Object(d["a"])(h,f,v,!1,null,null,null)),k=b.exports,y={components:{LogIn:m,SignIn:k},data:function(){return{imgUrl:"http://47.115.51.185/h5/img/logo2.47964cc3.png",showComponent:m}},methods:{changeSign:function(){this.showComponent=k},changeLogin:function(){this.showComponent=m}}},w=y,_=(e("4fde"),Object(d["a"])(w,a,o,!1,null,null,null));n["default"]=_.exports},e013:function(t,n,e){},f086:function(t,n,e){}}]);
//# sourceMappingURL=chunk-2635b251.e3aa7bb4.js.map